function isFloat(value) {
  if (isNaN(value)) {
    return false;
  }
  return parseFloat(value);
}
var previousMovieName ="";

const setTimeoutHandler = () => {
const isAd = document.getElementById('movie_player').classList.contains("ad-interrupting") || document.getElementById('movie_player').classList.contains("ad-showing");
console.log(isAd);
if(isAd)
{
const nowplaying = document.getElementsByClassName("video-stream")[0];
  const adtitle = document.querySelector('.ytp-flyout-cta-headline');
console.log("有廣告!!「"+adtitle.innerText+"」");
const ticks = isFloat(nowplaying.duration -0.5);
nowplaying.currentTime =ticks;
document.querySelector(".ytp-ad-skip-button")?.click();
document.querySelector(".ytp-ad-skip-button-modern")?.click();
console.log("廣告影片縮短了!!!");
}
const movieName = document.querySelector('yt-formatted-string.ytd-watch-metadata').innerText;
const overlay = document.querySelector('.ytp-autonav-endscreen-countdown-overlay');
if((overlay != null )&&(overlay.style.display != 'none'))
{
  console.log("快速播放下一部!!!");
  document.querySelector('.ytp-autonav-endscreen-upnext-play-button').click();
}
if(movieName!=previousMovieName){
console.log("現在播放:"+movieName);
previousMovieName=movieName;
}
setTimeout(setTimeoutHandler, 500);
};
setTimeoutHandler();
